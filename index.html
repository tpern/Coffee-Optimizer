<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coffee Brew Optimizer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="container">

  <h1>Coffee Brew Optimizer</h1>

  <!-- SECTION 1: User Type -->
  <div class="section">
    <label for="user-type">Are you a Home Barista or a Café?</label>
    <select id="user-type">
      <option value="">-- Choose --</option>
      <option value="home">Home Barista</option>
      <option value="cafe">Café / Professional</option>
    </select>
  </div>

  <!-- SECTION 2: Coffee Details -->
  <div class="section">
    <h3>Coffee Details</h3>

    <label for="origin">Origin</label>
<select id="origin">
  <option value="">-- Choose --</option>
  <optgroup label="Africa">
    <option value="burundi">Burundi</option>
    <option value="ethiopia">Ethiopia</option>
    <option value="kenya">Kenya</option>
    <option value="malawi">Malawi</option>
    <option value="rwanda">Rwanda</option>
    <option value="tanzania">Tanzania</option>
    <option value="uganda">Uganda</option>
    <option value="zambia">Zambia</option>
    <option value="zimbabwe">Zimbabwe</option>
    <option value="democratic-republic-congo">Democratic Republic of Congo</option>
    <option value="cameroon">Cameroon</option>
    <option value="ivory-coast">Ivory Coast</option>
    <option value="madagascar">Madagascar</option>
  </optgroup>
  <optgroup label="Asia & Oceania">
    <option value="china-yunnan">China (Yunnan)</option>
    <option value="india">India</option>
    <option value="indonesia-sumatra">Indonesia (Sumatra)</option>
    <option value="indonesia-java">Indonesia (Java)</option>
    <option value="indonesia-sulawesi">Indonesia (Sulawesi)</option>
    <option value="indonesia-bali">Indonesia (Bali)</option>
    <option value="indonesia-flores">Indonesia (Flores)</option>
    <option value="papua-new-guinea">Papua New Guinea</option>
    <option value="thailand">Thailand</option>
    <option value="vietnam">Vietnam</option>
    <option value="laos">Laos</option>
    <option value="myanmar">Myanmar</option>
    <option value="philippines">Philippines</option>
    <option value="timor-leste">Timor-Leste</option>
    <option value="australia">Australia</option>
    <option value="hawaii">Hawaii</option>
  </optgroup>
  <optgroup label="Middle East">
    <option value="yemen">Yemen</option>
    <option value="saudi-arabia">Saudi Arabia</option>
  </optgroup>
  <optgroup label="Central America">
    <option value="belize">Belize</option>
    <option value="costa-rica">Costa Rica</option>
    <option value="el-salvador">El Salvador</option>
    <option value="guatemala">Guatemala</option>
    <option value="honduras">Honduras</option>
    <option value="nicaragua">Nicaragua</option>
    <option value="panama">Panama</option>
  </optgroup>
  <optgroup label="South America">
    <option value="bolivia">Bolivia</option>
    <option value="brazil">Brazil</option>
    <option value="colombia">Colombia</option>
    <option value="ecuador">Ecuador</option>
    <option value="peru">Peru</option>
    <option value="venezuela">Venezuela</option>
  </optgroup>
  <optgroup label="North America & Caribbean">
    <option value="mexico">Mexico</option>
    <option value="jamaica">Jamaica</option>
    <option value="cuba">Cuba</option>
    <option value="dominican-republic">Dominican Republic</option>
    <option value="haiti">Haiti</option>
    <option value="puerto-rico">Puerto Rico</option>
  </optgroup>
  <optgroup label="Blends">
    <option value="blend-custom">Custom Blend (specify below)</option>
    <option value="blend-espresso">Espresso Blend</option>
    <option value="blend-breakfast">Breakfast Blend</option>
    <option value="blend-house">House Blend</option>
  </optgroup>
</select>

<!-- NEW: Blend Details Input (only shows if blend selected) -->
<div id="blend-details-section" style="display:none; margin-top:0.5em;">
  <label for="blend-details">Blend Details (optional)</label>
  <input type="text" id="blend-details" placeholder="E.g., 60% Brazil, 40% Ethiopia" />
</div>

    
    <label for="altitude">Altitude</label>
    <select id="altitude">
      <option value="">-- Choose --</option>
      <option value="0-800m">0–800m</option>
      <option value="800-1200m">800–1200m</option>
      <option value="1200-1800m">1200–1800m</option>
      <option value="1800m+">1800m+</option>
    </select>

   <label for="varietal">Varietal</label>
<select id="varietal">
  <option value="">-- Choose --</option>
  <optgroup label="Arabica - Ethiopian Heirlooms">
    <option value="heirloom-ethiopian">Ethiopian Heirloom</option>
    <option value="gesha-geisha">Gesha/Geisha</option>
    <option value="sidamo">Sidamo</option>
    <option value="yirgacheffe">Yirgacheffe</option>
  </optgroup>
  <optgroup label="Arabica - Bourbon Family">
    <option value="bourbon">Bourbon (Red)</option>
    <option value="yellow-bourbon">Yellow Bourbon</option>
    <option value="pink-bourbon">Pink Bourbon</option>
    <option value="orange-bourbon">Orange Bourbon</option>
    <option value="tekisic">Tekisic</option>
    <option value="jackson">Jackson</option>
  </optgroup>
  <optgroup label="Arabica - Typica Family">
    <option value="typica">Typica</option>
    <option value="java">Java</option>
    <option value="maragogype">Maragogype</option>
    <option value="blue-mountain">Blue Mountain</option>
    <option value="kona">Kona</option>
    <option value="pacas">Pacas</option>
    <option value="villa-sarchi">Villa Sarchi</option>
  </optgroup>
  <optgroup label="Arabica - Caturra Family">
    <option value="caturra">Caturra (Red)</option>
    <option value="yellow-caturra">Yellow Caturra</option>
    <option value="catuai">Catuai</option>
    <option value="yellow-catuai">Yellow Catuai</option>
    <option value="red-catuai">Red Catuai</option>
  </optgroup>
  <optgroup label="Arabica - Hybrid Cultivars">
    <option value="mundo-novo">Mundo Novo</option>
    <option value="pacamara">Pacamara</option>
    <option value="maracaturra">Maracaturra</option>
    <option value="maragogype">Maragogype</option>
  </optgroup>
  <optgroup label="Arabica - Modern Hybrids">
    <option value="sl28">SL-28</option>
    <option value="sl34">SL-34</option>
    <option value="ruiru-11">Ruiru 11</option>
    <option value="batian">Batian</option>
    <option value="k7">K7</option>
    <option value="catimor">Catimor</option>
    <option value="sarchimor">Sarchimor</option>
    <option value="iapar-59">IAPAR 59</option>
    <option value="icatu">Icatu</option>
  </optgroup>
  <optgroup label="Arabica - F1 Hybrids">
    <option value="centroamericano">Centroamericano</option>
    <option value="starmaya">Starmaya</option>
    <option value="casiopea">Casiopea</option>
    <option value="evaluna">Evaluna</option>
  </optgroup>
  <optgroup label="Robusta & Liberica">
    <option value="robusta">Robusta (Canephora)</option>
    <option value="liberica">Liberica</option>
    <option value="excelsa">Excelsa</option>
  </optgroup>
  <optgroup label="Rare & Experimental">
    <option value="eugenioides">Eugenioides</option>
    <option value="laurina">Laurina (Bourbon Pointu)</option>
    <option value="aramosa">Aramosa</option>
    <option value="sudanrume">Sudan Rume</option>
  </optgroup>
</select>
    
    <label for="roast-date">Roast Date</label>
    <input type="date" id="roast-date" />

    <label for="processing">Processing Method</label>
<select id="processing">
  <option value="">-- Choose --</option>
  <optgroup label="Traditional Methods">
    <option value="washed">Washed (Wet Processed)</option>
    <option value="natural">Natural (Dry Processed)</option>
    <option value="honey">Honey Process</option>
    <option value="white-honey">White Honey</option>
    <option value="yellow-honey">Yellow Honey</option>
    <option value="red-honey">Red Honey</option>
    <option value="black-honey">Black Honey</option>
    <option value="pulped-natural">Pulped Natural</option>
    <option value="semi-washed">Semi-Washed (Wet-Hulled/Giling Basah)</option>
  </optgroup>
  <optgroup label="Fermentation Methods">
    <option value="anaerobic">Anaerobic Fermentation</option>
    <option value="aerobic">Aerobic Fermentation</option>
    <option value="carbonic-maceration">Carbonic Maceration</option>
    <option value="lactic-fermentation">Lactic Acid Fermentation</option>
    <option value="koji-fermentation">Koji Fermentation</option>
    <option value="yeast-inoculation">Yeast Inoculation</option>
    <option value="extended-fermentation">Extended Fermentation</option>
  </optgroup>
  <optgroup label="Co-Fermentation">
    <option value="coferment-fruit">Co-Ferment with Fruit</option>
    <option value="coferment-spices">Co-Ferment with Spices</option>
    <option value="coferment-florals">Co-Ferment with Florals</option>
    <option value="coferment-wine-yeast">Co-Ferment with Wine Yeast</option>
    <option value="coferment-custom">Co-Ferment Custom</option>
  </optgroup>
  <optgroup label="Hybrid & Experimental">
    <option value="double-washed">Double Washed</option>
    <option value="double-anaerobic">Double Anaerobic</option>
    <option value="thermal-shock">Thermal Shock</option>
    <option value="infused">Infused Processing</option>
    <option value="mossto">Mossto Process</option>
    <option value="daterra-natural">Daterra Natural</option>
  </optgroup>
  <optgroup label="Drying Methods">
    <option value="sun-dried">Sun Dried</option>
    <option value="shade-dried">Shade Dried</option>
    <option value="mechanical-dried">Mechanical Dried</option>
    <option value="greenhouse-dried">Greenhouse Dried</option>
    <option value="african-beds">African Raised Beds</option>
    <option value="patio-dried">Patio Dried</option>
  </optgroup>
</select>
    
    <label for="roast-level">Roast Level</label>
    <select id="roast-level">
      <option value="">-- Choose --</option>
      <option value="light">Light</option>
      <option value="medium">Medium</option>
      <option value="medium-dark">Medium-Dark</option>
      <option value="dark">Dark</option>
    </select>
  </div>

  <!-- SECTION 3: Brew Method -->
  <div class="section">
    <h3>Brew Method</h3>

    <label for="brew-method">Select Brew Method:</label>
    <select id="brew-method">
      <option value="">-- Choose --</option>
      <option value="espresso">Espresso</option>
      <option value="v60">V60</option>
      <option value="chemex">Chemex</option>
      <option value="aeropress">Aeropress</option>
      <option value="french-press">French Press</option>
      <option value="turkish">Turkish</option>
      <option value="moka-pot">Moka Pot</option>
      <option value="balance-siphon">Balance Siphon</option>
      <option value="syphon">Syphon</option>
      <option value="cold-brew">Cold Brew</option>
    </select>

    <!-- Espresso-only -->
    <div id="espresso-machine-section" style="display:none;">
      <label for="espresso-machine">Espresso Machine</label>
      <select id="espresso-machine">
        <option value="">-- Choose --</option>
      </select>

      <div id="pressure-profile-section" style="display:none;">
        <label for="pressure-profile">Pressure Profile</label>
        <select id="pressure-profile">
          <option value="">-- Choose pressure profile --</option>
        </select>

        <div
          id="pressure-profile-warning"
          style="font-size:0.9em; margin-top:4px;"
        ></div>
      </div>
    </div>
  </div>

  <!-- SECTION 4: Grinder -->
  <div class="section">
    <label for="grinder">Grinder</label>
    <select id="grinder">
      <option value="">-- Choose --</option>
    </select>
  </div>

  <!-- SECTION 5: Water -->
  <div class="section">
    <label for="water-type">Water Type</label>
    <select id="water-type">
      <option value="">-- Choose --</option>
      <option value="tap">Tap</option>
      <option value="filtered">Filtered</option>
      <option value="distilled">Distilled</option>
      <option value="reverse-osmosis">RO</option>
      <option value="third-wave">Third Wave Water</option>
      <option value="spring">Spring</option>
    </select>
  </div>

  <!-- BUTTON: Get Initial Recipe (MOVED HERE - BEFORE TASTE FEEDBACK) -->
  <button id="submit-btn">Get Initial Brew Recipe</button>

  <div class="card" id="output"></div>

<!-- SECTION 6: SCA Taste Feedback (UPDATED - NO DEFAULT VALUES) -->
<div class="section" id="taste-feedback-section">
  <h3>Taste Feedback (SCA Scale)</h3>
  <p style="font-size:0.9em; color:#666; margin-bottom:1em;">
    After brewing, rate each attribute from 0-10 (5 = neutral, below 5 = deficient, above 5 = excellent)
  </p>

  <label for="aroma">Aroma (0-10)</label>
  <input type="number" id="aroma" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="flavor">Flavor (0-10)</label>
  <input type="number" id="flavor" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="aftertaste">Aftertaste (0-10)</label>
  <input type="number" id="aftertaste" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="acidity">Acidity (0-10)</label>
  <input type="number" id="acidity" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="body">Body (0-10)</label>
  <input type="number" id="body" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="balance">Balance (0-10)</label>
  <input type="number" id="balance" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="sweetness">Sweetness (0-10)</label>
  <input type="number" id="sweetness" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <label for="overall">Overall (0-10)</label>
  <input type="number" id="overall" min="0" max="10" step="0.5" placeholder="Rate 0-10" />

  <button id="feedback-submit-btn" type="button" style="margin-top:1em;">Submit Feedback & Learn</button>
</div>

<!-- NEW SECTION: Account & Access -->
<section class="section">
  <h3>Account & Access</h3>
  
  <!-- Access Level Display -->
  <div id="access-level-display" style="padding:1em; background:#f0f9ff; border-radius:6px; margin-bottom:1em;">
    <p><strong>Access Level:</strong> <span id="current-access-level">Free</span></p>
  </div>
  
  <!-- Farmer Code Entry -->
  <div style="margin-bottom:1em;">
    <label for="farmer-code-input">Have a Farmer Access Code?</label>
    <input type="text" id="farmer-code-input" placeholder="Enter code" style="margin-right:0.5em;" />
    <button type="button" onclick="handleFarmerCodeSubmit()">Activate</button>
    <div id="farmer-code-message" style="margin-top:0.5em; font-size:0.9em;"></div>
  </div>
  
  <!-- Privacy Settings -->
  <details style="margin-top:1em;">
    <summary style="cursor:pointer; font-weight:600;">Privacy Settings</summary>
    <div style="padding:1em; background:#f9fafb; margin-top:0.5em; border-radius:6px;">
      <label style="display:block; margin:0.5em 0;">
        <input type="checkbox" id="consent-terms" />
        I agree to the Terms of Service
      </label>
      
      <label style="display:block; margin:0.5em 0;">
        <input type="checkbox" id="consent-data-sharing" />
        Share anonymized brew data to improve global recommendations (Pro/Farmer only)
      </label>
      
      <label style="display:block; margin:0.5em 0;">
        <input type="checkbox" id="consent-analytics" />
        Allow anonymous usage analytics
      </label>
      
      <button type="button" onclick="savePrivacySettings()" style="margin-top:1em;">Save Privacy Settings</button>
      <div id="privacy-message" style="margin-top:0.5em; font-size:0.9em;"></div>
    </div>
  </details>
</section>

<!-- SECTION 7: Learning Tools (your existing section) -->
  
  <!-- SECTION 7: Learning Tools -->
  <section class="section">
    <h3>Learning Tools</h3>
    <button type="button" onclick="exportLearningData()">Export Learning Data</button>
    <label for="learning-import" style="display:block; margin-top:0.5em;">
      Import Learning Data:
      <input 
        type="file" 
        id="learning-import" 
        accept="application/json"
        onchange="importLearningData(this.files[0])"
        style="margin-left:0.5em;"
      />
    </label>
  </section>

  <!-- SECTION 8: Debug & Admin -->
  <section class="section">
    <h3>Debug & Admin</h3>
    <button type="button" onclick="resetAllLearning()">Reset All Learning</button>
    <button type="button" onclick="resetBrewHistory()">Reset Brew History</button>
    <button type="button" onclick="resetEverything()">Reset Everything</button>
    <div id="debug-inspector" style="margin-top:1em;"></div>
  </section>

</div>

<script src="script.js"></script>
</body>
</html>
