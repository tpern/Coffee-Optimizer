<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coffee Brew Optimizer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="container">

  <h1>Coffee Brew Optimizer</h1>

  <!-- SECTION 1: User Type -->
  <div class="section">
    <label for="user-type">Are you a Home Barista or a Café?</label>
    <select id="user-type">
      <option value="">-- Choose --</option>
      <option value="home">Home Barista</option>
      <option value="cafe">Café / Professional</option>
    </select>
  </div>

  <!-- SECTION 2: Coffee Details -->
  <div class="section">
    <h3>Coffee Details</h3>

    <label for="origin">Origin</label>
    <select id="origin">
      <option value="">-- Choose --</option>
      <option value="Ethiopia">Ethiopia</option>
      <option value="Kenya">Kenya</option>
      <option value="Colombia">Colombia</option>
      <option value="Brazil">Brazil</option>
      <option value="Guatemala">Guatemala</option>
      <option value="Costa-rica">Costa Rica</option>
      <option value="Panama">Panama</option>
      <option value="Peru">Peru</option>
      <option value="Mexico">Mexico</option>
    </select>

    <label for="altitude">Altitude</label>
    <select id="altitude">
      <option value="">-- Choose --</option>
      <option value="0-800m">0–800m</option>
      <option value="800-1200m">800–1200m</option>
      <option value="1200-1800m">1200–1800m</option>
      <option value="1800m+">1800m+</option>
    </select>

    <label for="varietal">Varietal</label>
    <select id="varietal">
      <option value="">-- Choose --</option>
      <option value="heirloom">Heirloom</option>
      <option value="typica">Typica</option>
      <option value="caturra">Caturra</option>
      <option value="bourbon">Bourbon</option>
      <option value="pacamara">Pacamara</option>
    </select>

    <label for="roast-date">Roast Date</label>
    <input type="date" id="roast-date" />

    <label for="processing">Processing Method</label>
    <select id="processing">
      <option value="">-- Choose --</option>
      <option value="washed">Washed</option>
      <option value="natural">Natural</option>
      <option value="honey">Honey</option>
      <option value="wet-hulled">Wet Hulled</option>
      <option value="pulped-natural">Pulped Natural</option>
      <option value="anaerobic">Anaerobic</option>
      <option value="semi-washed">Semi-Washed</option>
    </select>

    <label for="roast-level">Roast Level</label>
    <select id="roast-level">
      <option value="">-- Choose --</option>
      <option value="light">Light</option>
      <option value="medium">Medium</option>
      <option value="medium-dark">Medium-Dark</option>
      <option value="dark">Dark</option>
    </select>
  </div>

  <!-- SECTION 3: Brew Method -->
  <div class="section">
    <h3>Brew Method</h3>

    <label for="brew-method">Select Brew Method:</label>
    <select id="brew-method">
      <option value="">-- Choose --</option>
      <option value="espresso">Espresso</option>
      <option value="v60">V60</option>
      <option value="chemex">Chemex</option>
      <option value="aeropress">Aeropress</option>
      <option value="french-press">French Press</option>
      <option value="turkish">Turkish</option>
      <option value="moka-pot">Moka Pot</option>
      <option value="balance-siphon">Balance Siphon</option>
      <option value="syphon">Syphon</option>
      <option value="cold-brew">Cold Brew</option>
    </select>

    <!-- Espresso-only -->
    <div id="espresso-machine-section" style="display:none;">
      <label for="espresso-machine">Espresso Machine</label>
      <select id="espresso-machine">
        <option value="">-- Choose --</option>
      </select>

      <div id="pressure-profile-section" style="display:none;">
        <label for="pressure-profile">Pressure Profile</label>
        <select id="pressure-profile">
          <option value="">-- Choose pressure profile --</option>
        </select>

        <div
          id="pressure-profile-warning"
          style="font-size:0.9em; margin-top:4px;"
        ></div>
      </div>
    </div>
  </div>

  <!-- SECTION 4: Grinder -->
  <div class="section">
    <label for="grinder">Grinder</label>
    <select id="grinder">
      <option value="">-- Choose --</option>
    </select>
  </div>

  <!-- SECTION 5: Water -->
  <div class="section">
    <label for="water-type">Water Type</label>
    <select id="water-type">
      <option value="">-- Choose --</option>
      <option value="tap">Tap</option>
      <option value="filtered">Filtered</option>
      <option value="distilled">Distilled</option>
      <option value="reverse-osmosis">RO</option>
      <option value="third-wave">Third Wave Water</option>
      <option value="spring">Spring</option>
    </select>
  </div>

  <!-- BUTTON: Get Initial Recipe (MOVED HERE - BEFORE TASTE FEEDBACK) -->
  <button id="submit-btn">Get Initial Brew Recipe</button>

  <div class="card" id="output"></div>

  <!-- SECTION 6: SCA Taste Feedback (AFTER BUTTON) -->
  <div class="section" id="taste-feedback-section">
    <h3>Taste Feedback (SCA Scale)</h3>
    <p style="font-size:0.9em; color:#666; margin-bottom:1em;">
      After brewing, rate each attribute from 0-10 (5 = neutral, below 5 = deficient, above 5 = excellent)
    </p>

    <label for="aroma">Aroma (0-10)</label>
    <input type="number" id="aroma" min="0" max="10" step="0.5" value="5" />

    <label for="flavor">Flavor (0-10)</label>
    <input type="number" id="flavor" min="0" max="10" step="0.5" value="5" />

    <label for="aftertaste">Aftertaste (0-10)</label>
    <input type="number" id="aftertaste" min="0" max="10" step="0.5" value="5" />

    <label for="acidity">Acidity (0-10)</label>
    <input type="number" id="acidity" min="0" max="10" step="0.5" value="5" />

    <label for="body">Body (0-10)</label>
    <input type="number" id="body" min="0" max="10" step="0.5" value="5" />

    <label for="balance">Balance (0-10)</label>
    <input type="number" id="balance" min="0" max="10" step="0.5" value="5" />

    <label for="sweetness">Sweetness (0-10)</label>
    <input type="number" id="sweetness" min="0" max="10" step="0.5" value="5" />

    <label for="overall">Overall (0-10)</label>
    <input type="number" id="overall" min="0" max="10" step="0.5" value="5" />

    <!-- SECOND BUTTON: Submit Feedback -->
    <button id="feedback-submit-btn" type="button" style="margin-top:1em;">Submit Feedback & Learn</button>
  </div>

  <!-- SECTION 7: Learning Tools -->
  <section class="section">
    <h3>Learning Tools</h3>
    <button type="button" onclick="exportLearningData()">Export Learning Data</button>
    <label for="learning-import" style="display:block; margin-top:0.5em;">
      Import Learning Data:
      <input 
        type="file" 
        id="learning-import" 
        accept="application/json"
        onchange="importLearningData(this.files[0])"
        style="margin-left:0.5em;"
      />
    </label>
  </section>

  <!-- SECTION 8: Debug & Admin -->
  <section class="section">
    <h3>Debug & Admin</h3>
    <button type="button" onclick="resetAllLearning()">Reset All Learning</button>
    <button type="button" onclick="resetBrewHistory()">Reset Brew History</button>
    <button type="button" onclick="resetEverything()">Reset Everything</button>
    <div id="debug-inspector" style="margin-top:1em;"></div>
  </section>

</div>

<script src="script.js"></script>
</body>
</html>
